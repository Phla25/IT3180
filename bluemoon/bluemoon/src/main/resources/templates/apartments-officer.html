<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xem Căn Hộ - Cơ Quan Chức Năng - BlueMoon Portal</title>
    
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ==================== OFFICER-SPECIFIC STYLES ==================== */
        .read-only-badge {
            background: linear-gradient(45deg, #F59E0B, #EF4444);
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .disabled-action {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        
        .officer-header {
            background: linear-gradient(135deg, #F59E0B, #EF4444);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .officer-header i {
            font-size: 24px;
        }
        
        .officer-header h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .officer-header p {
            margin: 0;
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* ==================== ENHANCED CARDS ==================== */
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .stat-card:hover::before {
            left: 100%;
        }
        
        /* ==================== LOADING STATES ==================== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #F59E0B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- SIDEBAR - CƠ QUAN CHỨC NĂNG -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-building"></i>
                <span>BlueMoon Portal</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="dashboard-officer.html" class="nav-item">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-item" onclick="showFeatureToggle('Xem Sự Cố', 'Tính năng này đang được phát triển và sẽ sớm ra mắt.')">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Xem Sự Cố</span>
            </a>
            <a href="#" class="nav-item" onclick="showFeatureToggle('Báo Cáo', 'Tính năng này đang được phát triển và sẽ sớm ra mắt.')">
                <i class="fas fa-chart-bar"></i>
                <span>Báo Cáo</span>
            </a>
            <a href="#" class="nav-item" onclick="showFeatureToggle('Tài Liệu', 'Tính năng này đang được phát triển và sẽ sớm ra mắt.')">
                <i class="fas fa-file-alt"></i>
                <span>Tài Liệu</span>
            </a>
            <a href="apartments-officer.html" class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Xem Căn Hộ</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="#" class="nav-item">
                <i class="fas fa-cog"></i>
                <span>Cài Đặt</span>
            </a>
        </div>
    </aside>

    <!-- HEADER -->
    <header class="header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <h1>Xem Căn Hộ</h1>
        </div>
        
        <div class="header-right">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
                <span class="badge">3</span>
            </div>
            
            <div class="user-menu">
                <div class="user-info">
                    <span class="user-name">Nguyễn Văn Minh</span>
                    <span class="user-role" style="color: #F59E0B;">CƠ QUAN CHỨC NĂNG</span>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="dropdown-menu">
                    <a href="profile.html">
                        <i class="fas fa-user"></i> Thông Tin Cá Nhân
                    </a>
                    <a href="#">
                        <i class="fas fa-cog"></i> Cài Đặt
                    </a>
                    <hr>
                    <button type="button" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Đăng Xuất
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- Officer Notice -->
        <div class="officer-header">
            <i class="fas fa-shield-alt"></i>
            <div>
                <h2>Chế Độ Xem Chỉ Đọc</h2>
                <p>Bạn đang xem thông tin căn hộ với quyền hạn giới hạn. Chỉ có thể xem thông tin, không thể thêm, sửa hoặc xóa.</p>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Tổng Căn Hộ</span>
                    <div class="stat-icon blue">
                        <i class="fas fa-home"></i>
                    </div>
                </div>
                <div class="stat-value">256</div>
                <div class="stat-change">
                    <i class="fas fa-info-circle"></i>
                    <span>Thông tin tổng quan</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Đã Có Chủ</span>
                    <div class="stat-icon green">
                        <i class="fas fa-user-check"></i>
                    </div>
                </div>
                <div class="stat-value">180</div>
                <div class="stat-change">
                    <i class="fas fa-check-circle"></i>
                    <span>70% tổng số</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Đang Bán</span>
                    <div class="stat-icon orange">
                        <i class="fas fa-tags"></i>
                    </div>
                </div>
                <div class="stat-value">45</div>
                <div class="stat-change">
                    <i class="fas fa-chart-line"></i>
                    <span>18% tổng số</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-title">Trống</span>
                    <div class="stat-icon purple">
                        <i class="fas fa-door-open"></i>
                    </div>
                </div>
                <div class="stat-value">31</div>
                <div class="stat-change">
                    <i class="fas fa-info-circle"></i>
                    <span>12% tổng số</span>
                </div>
            </div>
        </div>

        <!-- Main Card -->
        <div class="content-card">
            <div class="content-card-header">
                <div>
                    <h2 class="content-card-title">Danh Sách Căn Hộ (Chỉ Xem)</h2>
                    <p style="color: var(--gray); font-size: 14px; margin-top: 4px;">
                        Thông tin chi tiết các căn hộ trong hệ thống - Chế độ chỉ đọc
                    </p>
                </div>
                <div class="flex gap-2">
                    <button class="btn btn-outline" onclick="showFeatureToggle('Export Excel', 'Tính năng export đang được phát triển')">
                        <i class="fas fa-download"></i>
                        Export Excel
                    </button>
                    <span class="read-only-badge">
                        <i class="fas fa-lock"></i>
                        Chỉ Xem
                    </span>
                </div>
            </div>
            
            <!-- Search & Filter -->
            <div class="flex-between mb-3">
                <div class="search-box" style="flex: 1; max-width: 400px;">
                    <input type="text" 
                           class="form-control" 
                           id="searchInput" 
                           placeholder="Tìm kiếm theo mã căn hộ, địa chỉ..."
                           onkeyup="searchTable('searchInput', 'apartmentsTable')">
                </div>
                
                <div class="flex gap-2">
                    <select class="form-control" style="width: 180px;" onchange="filterByStatus(this.value)">
                        <option value="">Tất cả trạng thái</option>
                        <option value="live">Đã có chủ</option>
                        <option value="on-sale">Đang bán</option>
                        <option value="empty">Trống</option>
                        <option value="leasing">Cho thuê</span>
                    </select>
                    
                    <select class="form-control" style="width: 180px;" onchange="filterByTower(this.value)">
                        <option value="">Tất cả tháp</option>
                        <option value="A">Tháp A</option>
                        <option value="B">Tháp B</option>
                        <option value="C">Tháp C</option>
                    </select>
                </div>
            </div>
            
            <!-- Table -->
            <div class="table-container">
                <table id="apartmentsTable">
                    <thead>
                        <tr>
                            <th>Mã ID</th>
                            <th>Mã Căn Hộ</th>
                            <th>Vị Trí</th>
                            <th>Địa Chỉ</th>
                            <th>Diện Tích</th>
                            <th>Phòng</th>
                            <th>WC</th>
                            <th>Trạng Thái</th>
                            <th>Chủ Hộ/Giá</th>
                            <th>Thao Tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-status="live" data-tower="A">
                            <td><strong>APT001</strong></td>
                            <td><strong>A-1205</strong></td>
                            <td>Tháp A, Tầng 12</td>
                            <td>123 Đường ABC, Quận XYZ</td>
                            <td>120 m²</td>
                            <td>3</td>
                            <td>2</td>
                            <td><span class="status-badge live">Đã có chủ</span></td>
                            <td>Nguyễn Văn A</td>
                            <td>
                                <div class="flex gap-1">
                                    <button class="btn btn-sm btn-outline" onclick="viewApartment('A-1205')" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-status="on-sale" data-tower="B">
                            <td><strong>APT002</strong></td>
                            <td><strong>B-0803</strong></td>
                            <td>Tháp B, Tầng 8</td>
                            <td>456 Đường DEF, Quận ABC</td>
                            <td>95 m²</td>
                            <td>2</td>
                            <td>2</td>
                            <td><span class="status-badge on-sale">Đang bán</span></td>
                            <td>4.1 tỷ VNĐ</td>
                            <td>
                                <div class="flex gap-1">
                                    <button class="btn btn-sm btn-outline" onclick="viewApartment('B-0803')" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-status="empty" data-tower="C">
                            <td><strong>APT003</strong></td>
                            <td><strong>C-1502</strong></td>
                            <td>Tháp C, Tầng 15</td>
                            <td>789 Đường GHI, Quận DEF</td>
                            <td>110 m²</td>
                            <td>3</td>
                            <td>2</td>
                            <td><span class="status-badge empty">Trống</span></td>
                            <td>4.8 tỷ VNĐ</td>
                            <td>
                                <div class="flex gap-1">
                                    <button class="btn btn-sm btn-outline" onclick="viewApartment('C-1502')" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-status="leasing" data-tower="A">
                            <td><strong>APT004</strong></td>
                            <td><strong>A-0601</strong></td>
                            <td>Tháp A, Tầng 6</td>
                            <td>321 Đường JKL, Quận GHI</td>
                            <td>85 m²</td>
                            <td>2</td>
                            <td>1</td>
                            <td><span class="status-badge leasing">Cho thuê</span></td>
                            <td>15 triệu/tháng</td>
                            <td>
                                <div class="flex gap-1">
                                    <button class="btn btn-sm btn-outline" onclick="viewApartment('A-0601')" title="Xem chi tiết">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền chỉnh sửa">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline disabled-action" title="Không có quyền xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <div class="flex-between mt-3" style="padding-top: 20px; border-top: 1px solid var(--gray-light);">
                <div style="color: var(--gray); font-size: 14px;">
                    Hiển thị 1-4 trong tổng số 256 căn hộ
                </div>
                <div class="flex gap-1">
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="btn btn-sm btn-primary">1</button>
                    <button class="btn btn-sm btn-outline">2</button>
                    <button class="btn btn-sm btn-outline">3</button>
                    <button class="btn btn-sm btn-outline">...</button>
                    <button class="btn btn-sm btn-outline">64</button>
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 BlueMoon Apartment Management System. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact Support</a>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/main.js"></script>
    
    <script>
        // ==================== OFFICER APARTMENT VIEW ====================
        
        // Feature toggle function
        function showFeatureToggle(featureName, message) {
            Swal.fire({
                icon: 'info',
                title: `${featureName} - Coming Soon`,
                html: `
                    <div style="text-align: center; padding: 20px;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(45deg, #F59E0B, #EF4444); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-rocket" style="font-size: 32px; color: white;"></i>
                        </div>
                        <p style="margin-bottom: 15px; font-size: 16px;">${message}</p>
                        <p style="color: #6B7280; font-size: 14px;">
                            <i class="fas fa-clock"></i> 
                            Tính năng này sẽ được phát triển trong phiên bản tiếp theo
                        </p>
                    </div>
                `,
                confirmButtonColor: '#F59E0B',
                confirmButtonText: 'Tôi hiểu',
                showCancelButton: true,
                cancelButtonText: 'Thông báo cho tôi',
                cancelButtonColor: '#6B7280'
            }).then((result) => {
                if (result.dismiss === Swal.DismissReason.cancel) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Đã đăng ký!',
                        text: 'Chúng tôi sẽ thông báo khi tính năng này ra mắt.',
                        confirmButtonColor: '#F59E0B'
                    });
                }
            });
        }
        
        // Loading overlay functions
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }
        
        // View apartment details (read-only)
        function viewApartment(apartmentId) {
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                
                // Sample apartment data
                const apartments = {
                    'A-1205': {
                        apartmentId: 'APT001',
                        id: 'A-1205',
                        tower: 'A',
                        floor: 12,
                        roomNumber: '05',
                        address: '123 Đường ABC, Quận XYZ',
                        area: 120,
                        bedrooms: 3,
                        bathrooms: 2,
                        status: 'live',
                        price: null,
                        owner: 'Nguyễn Văn A',
                        description: 'Căn hộ cao cấp với view đẹp'
                    },
                    'B-0803': {
                        apartmentId: 'APT002',
                        id: 'B-0803',
                        tower: 'B',
                        floor: 8,
                        roomNumber: '03',
                        address: '456 Đường DEF, Quận ABC',
                        area: 95,
                        bedrooms: 2,
                        bathrooms: 2,
                        status: 'on-sale',
                        price: 4100000000,
                        owner: null,
                        description: 'Căn hộ hiện đại, tiện nghi đầy đủ'
                    },
                    'C-1502': {
                        apartmentId: 'APT003',
                        id: 'C-1502',
                        tower: 'C',
                        floor: 15,
                        roomNumber: '02',
                        address: '789 Đường GHI, Quận DEF',
                        area: 110,
                        bedrooms: 3,
                        bathrooms: 2,
                        status: 'empty',
                        price: 4800000000,
                        owner: null,
                        description: 'Căn hộ trống, sẵn sàng bán'
                    },
                    'A-0601': {
                        apartmentId: 'APT004',
                        id: 'A-0601',
                        tower: 'A',
                        floor: 6,
                        roomNumber: '01',
                        address: '321 Đường JKL, Quận GHI',
                        area: 85,
                        bedrooms: 2,
                        bathrooms: 1,
                        status: 'leasing',
                        price: 15000000,
                        owner: null,
                        description: 'Căn hộ cho thuê dài hạn'
                    }
                };
                
                const apartment = apartments[apartmentId];
                if (!apartment) return;
                
                const statusTexts = {
                    'live': 'Đã có chủ',
                    'on-sale': 'Đang bán',
                    'empty': 'Trống',
                    'leasing': 'Cho thuê'
                };
                
                const formatPrice = (price) => {
                    if (!price) return 'Chưa định giá';
                    if (price >= 1000000000) {
                        return `${(price / 1000000000).toFixed(1)} tỷ VNĐ`;
                    } else if (price >= 1000000) {
                        return `${(price / 1000000).toFixed(0)} triệu/tháng`;
                    }
                    return `${price.toLocaleString()} VNĐ`;
                };
                
                Swal.fire({
                    title: `Thông Tin Căn Hộ ${apartmentId}`,
                    html: `
                        <div style="text-align: left; padding: 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                                <div>
                                    <p><strong>Mã ID:</strong> ${apartment.apartmentId}</p>
                                    <p><strong>Mã căn hộ:</strong> ${apartment.id}</p>
                                    <p><strong>Vị trí:</strong> Tháp ${apartment.tower}, Tầng ${apartment.floor}</p>
                                    <p><strong>Địa chỉ:</strong> ${apartment.address}</p>
                                    <p><strong>Diện tích:</strong> ${apartment.area} m²</p>
                                </div>
                                <div>
                                    <p><strong>Phòng ngủ:</strong> ${apartment.bedrooms}</p>
                                    <p><strong>Phòng tắm:</strong> ${apartment.bathrooms}</p>
                                    <p><strong>Trạng thái:</strong> ${statusTexts[apartment.status]}</p>
                                    <p><strong>Chủ hộ:</strong> ${apartment.owner || 'Chưa có'}</p>
                                    <p><strong>Giá:</strong> ${formatPrice(apartment.price)}</p>
                                </div>
                            </div>
                            <div>
                                <p><strong>Mô tả:</strong></p>
                                <p style="color: #6B7280; font-style: italic;">${apartment.description}</p>
                            </div>
                            <div style="margin-top: 20px; padding: 16px; background: #FEF3C7; border-radius: 8px; border-left: 4px solid #F59E0B;">
                                <p style="margin: 0; color: #92400E; font-size: 14px;">
                                    <i class="fas fa-info-circle"></i> 
                                    <strong>Chế độ chỉ đọc:</strong> Bạn chỉ có thể xem thông tin căn hộ. Để chỉnh sửa, vui lòng liên hệ Ban Quản Trị.
                                </p>
                            </div>
                        </div>
                    `,
                    confirmButtonColor: '#F59E0B',
                    width: 700,
                    showCancelButton: true,
                    cancelButtonText: 'Đóng',
                    confirmButtonText: 'In Thông Tin'
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Đã gửi yêu cầu!',
                            text: 'Thông tin căn hộ sẽ được in và gửi đến email của bạn.',
                            confirmButtonColor: '#F59E0B'
                        });
                    }
                });
            }, 500);
        }
        
        // Filter functions
        function filterByStatus(status) {
            const rows = document.querySelectorAll('#apartmentsTable tbody tr');
            rows.forEach(row => {
                if (!status || row.dataset.status === status) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        function filterByTower(tower) {
            const rows = document.querySelectorAll('#apartmentsTable tbody tr');
            rows.forEach(row => {
                if (!tower || row.dataset.tower === tower) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Enhanced page interactions
        document.addEventListener('DOMContentLoaded', function() {
            // Add click ripple effect to cards
            const cards = document.querySelectorAll('.stat-card, .content-card');
            cards.forEach(card => {
                card.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // Add CSS for ripple animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl + K for search
                if (e.ctrlKey && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
                
                // Escape to close modals
                if (e.key === 'Escape') {
                    Swal.close();
                }
            });
            
            // Performance monitoring
            const startTime = performance.now();
            window.addEventListener('load', function() {
                const loadTime = performance.now() - startTime;
                console.log(`Officer Apartment Page loaded in ${loadTime.toFixed(2)}ms`);
                
                // Show performance badge if load time is good
                if (loadTime < 1000) {
                    const badge = document.createElement('div');
                    badge.style.cssText = `
                        position: fixed;
                        bottom: 20px;
                        right: 20px;
                        background: #F59E0B;
                        color: white;
                        padding: 8px 12px;
                        border-radius: 20px;
                        font-size: 12px;
                        font-weight: 600;
                        z-index: 1000;
                        animation: slideInUp 0.3s ease;
                    `;
                    badge.innerHTML = '<i class="fas fa-bolt"></i> Fast Load';
                    document.body.appendChild(badge);
                    
                    setTimeout(() => {
                        badge.style.animation = 'slideOutDown 0.3s ease';
                        setTimeout(() => badge.remove(), 300);
                    }, 3000);
                }
            });
        });
        
        // Error handling
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise Rejection:', e.reason);
        });
        
        console.log('BlueMoon Portal - Officer Apartment View Loaded ✓');
        console.log('Read-Only Mode Active ✓');
    </script>
</body>
</html>
